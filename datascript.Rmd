---
title: "Week 4 Homework"
output: html_document
date: "2022-10-30"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Prepping Data for Plotting

Calling the required libraries

```{r cars}
library(dplyr)
library(here)
library(sf)
library(tmap)
library(countrycode)
library(janitor)
```

Read in the data, select the required columns and create a new column with the hdi difference

```{r}
data <- read.csv(here::here(('HDR21-22_Composite_indices_complete_time_series.csv'))) %>%
  clean_names() %>%
  dplyr::select(starts_with("hdi_2010"), starts_with("hdi_2019"), starts_with("ISO")) %>%
  mutate(hdi_diff = hdi_2019 - hdi_2010)
```

Call in the required shapefiles

```{r}
shapefile <- st_read(here::here('World_Countries_(Generalized)','World_Countries__Generalized_.shp'))
```

Converts the ISO in the shapefile from ISO 2 character to ISO 3 character, which is the version in the dataset

```{r}
shapefile$ISO3 <- countrycode(shapefile$ISO, origin = 'iso2c', destination = 'iso3c')
```

Merge together the csv with the shapefile, ready for plotting

```{r}
plottingdf <- shapefile %>%
    merge(., 
        data,
        by.x = 'ISO3',
        by.y = 'iso3')

# plot(plottingdf)
```

**Week 5 homework**

made by XiaFan

```{r}
tmap_mode("plot")
map <- tm_shape(plottingdf) + 
  tm_polygons("hdi_diff", title="HDI change") +
  tm_layout(title = "Global HDI Change between 2010 and 2019", legend.position = c("left", "bottom")) + 
  tm_compass(north=0, position=c(0.93,0.8)) +
  tm_scale_bar(position=c(0.4,0.02), text.size=0.6)

tmap_arrange(map,widths = 190)
```
